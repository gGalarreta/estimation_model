RUNA-662, Kardex v2 Cada movimiento generado en Kardex deberá tener un detalle que será editable en ciertos campos. Donde se verá reflejado lo siguiente: Fecha IMSS = Fecha de movimiento ante el IMSS (Editable) Fecha IMSS = Fecha de movimiento ante el IMSS (Editable) Tipo de Movimiento = Alta y/o reingreso, baja, modificación de salario (SBC). Registro patronal Política. Factor de integración = Se determina con los elementos fijos (Aguinaldo, vacaciones, prima vacacional, etc) Percepciones variables = Promedio de las variables percibidas en el último cálculo de variabilidad realizado. Salario diario Salario diario integrado (Salario Diario* Factor de integración) Salario base de cotización= salario base para el calculo de cuotas, se deben considerar el mínimo integrado y el tope máximo. Estatus del empleado=activo ó inactivo. En la pantalla anterior se muestra una idea del diseño de los campos para el detalle del movimiento del KARDEX y lo que sombreado en morado fuerte no seria editable. Cada cambio en KARDEX deberá quedar registrado de manera histórica por fecha, por tipo de movimiento. En la pantalla anterior se muestra el histórico de los movimientos en KARDEX, en esta pantalla debería existir un botón para mostrar detalle y aparezca el diseño que hace falta.  Desarrollar una versión complemento para el KARDEX empleado y la card de txt pueda leer la información. La modificación en la integración del SBC dentro del KARDEX afectará directamente las nóminas posteriores a la fecha en la que se registrará el movimiento. Ya que las cuotas IMSS de las nóminas están basadas en el SBC del empleado Los TXT de M/S también se basan en el SBC y la fecha. Perfecto, gracias por los comentarios La prueba de integrar variabilidad a kardex no se ha podido realizar por que se genero un internal error al promediar las variables Se desplego un ambiente QA copia de develop y también se replico el internal error al correr variabilidad Se detiene la salida debido a que se liberara primero PPP, posterior a esto se haran unas pruebas rapidas para continuar con la salida Se detienen las pruebas por un hotfix de PPP, employees kardex perfil
RUNA-38, Cálculo de ISN Hidalgo * (Cálculo por tabla) El impuesto sobre nóminas se determinará sobre el monto total de las erogaciones gravadas mensualmente, mediante la aplicación de la tarifa y procedimientos siguientes: Calculo de Hidalgo Son objeto de este impuesto, las erogaciones en efectivo o en especie, que tengan como fin remunerar el trabajo personal subordinado, que se preste dentro del territorio del Estado, independientemente de la designación que se les otorgue y del lugar en que se realicen. Las erogaciones incluyen las que se efectúen a: los obreros, empleados de confianza, empleados por honorarios asimilados a sueldos o salarios, directores, gerentes, administradores, representantes, integrantes de consejos directivos, de vigilancia o consultivos, comisarios, intermediarios y demás personal que las reciba, de toda clase de empresas, negociaciones Para efectos de este impuesto grava, las siguientes: todas las contraprestaciones cualesquiera que sean los nombres con los que se les designe, ya sean ordinarias o extraordinarias, en las que se incluyen los pagos realizados por:  I.- Sueldos y salarios; II.- Tiempo extraordinario de trabajo; III.- Premios, primas, bonos, estímulos e incentivos; IV.- Compensaciones; V.- Gratificaciones y aguinaldos; VI.- Primas de antigüedad; y VII.- Asimilados a salarios Exentos de este impuesto: I. Las erogaciones que se cubran por concepto de: a) Indemnizaciones derivadas de la rescisión o terminación de las relaciones de trabajo, ya sean de manera voluntaria o por resolución de autoridad competente; b) PTU c) Indemnizaciones por riesgos o enfermedades profesionales d) Pensiones y jubilaciones en los casos de invalidez, vejez, cesantía y muerte; e) Pagos por gastos funerarios; f) Aportaciones al IMSS o de fondos para el retiro h) El Fondo de ahorro i) Despensas, alimentación y transporte: cuando en su conjunto no rebase el 40% del total del salario y se hayan otorgado de manera general a la totalidad de los trabajadores. Los mockups y el flujo serán exactamente los mismos que ISN Sinaloa, solo debemos de cambiar Sinaloa por Hidalgo. Para la tabla de ISN en tablas y valores, existe una card donde se detalla el orden en el que deberán ir. (Sinaloa, Hidalgo y Campeche) Cuando existan nóminas con empleados domiciliados al estado de Hidalgo como lo establece la card https://runahr.atlassian.net/browse/RUNA2-1168, el cálculo del ISN se deberá ajustar a la metodología de cálculo para esa entidad. (Artículos 21 al 27 de la Ley de Hacienda para el Estado de Hidalgo. https://idconline.mx/fiscal-contable/2018/06/26/hidalgo-calculo-del-isn-en-2018  Se deberá agregar la tabla de cálculo adjunto en los mockups al tab de Tablas y valores en la configuración de la empresa.  - Al hacerse el cálculo de forma mensual, en el paso 1 de la nómina si se trata del ISN hidalgo deberá aparecer "Por calcular" en vez del monto de ISN como normalmente pasaría.  - Al darle click a "Por calcular" deberá levantar los tooltips que se usan para nóminas con el mensaje "El ISN de Hidalgo debe calcularse mensualmente. Cuando termines de correr tu última nómina del mes, ve a nóminas históricas y da click en “Calcular ISN” para calcular y actualizar todos tus reportes de ISN."  - En nóminas históricas si en el mes en alguna nómina existe un empleado con estado Sinaloa, Campeche o Hidalgo, deberá aparecer un botón para poder hacer el cálculo y se mostrará una ventana de confirmación, progreso, como en el resto de la aplicación. Además de hacer el cálculo se deberá de actualizar los reportes correspondientes.  - El cálculo del ISN queda a responsabilidad del operador y podrá correrse cuantas veces este considere necesario. *Este estado debe considerarse en la carga masiva de empleados y en el layout de onboarding *Será responsabilidad del operador vigilar y/o asignar al empleado a la entidad federativa Hidalgo y deberá ser motivo de incidencia direccionar al empleado a la entidad federativa previo al cálculo de la nómina donde deba registrarse dicho cambio y a partir de ese cambio todos los procesos de nómina donde participe el empleado deberá aplicarse la metodología del cálculo de dicha entidad.  * Deberá aparecer en el detalle del cálculo de nómina del empleado como una provisión.  * Deberá aparecer como provisión en los siguientes reportes: desglose de conceptos del mes, totales por concepto, reporte de nómina y en cualquier otro reporte que se llegue a desarrollar y que tenga implícito este concepto (acumulados por mes y acumulados por rango de fechas).  * En los reportes mensuales del cálculo de ISN (empleado y concepto) se deberá respetar la metodología del cálculo para la determinación de la base del ISN y su respectivo impuesto, se adjuntan los ejemplos de dichos reportes para esta entidad. * En el caso de finiquitos y/o liquidaciones, el sistema deberá arrojar el cálculo de la provisión con la metodología de la entidad federativa donde se encuentre registrado el empleado al momento de registrar su baja y sólo podrá actualizarse previo al cálculo de dicho finiquito. 1. La cuota fija que se va ha estar tomando en cuenta para el ISN de Hidalgo será de 0.00 o se tomarán los valores que vienen dentro del Excel ISN EJEMPLO HIDALGO CON EMPLEADOS? 2.El valor a comparar los límites es el total a nivel nómina? 3. El valor se calculará a final de mes o se irán acumulando por periodo? o si se calcula al final de cada nómina en el primer periodo debe de salir en cero y al final del mes entonces ya totaliza todos los montos? 4. Me percate que dentro del archivo ISN EJEMPLO HIDALGO CON EMPLEADOS en la pestaña isn Hidalgo concepto se muestran dos tablas de cálculo de ISN, eso quiere decir que se puede calcular el ISN por quincena y mensual, pero qué sucede con las nóminas semanales o catorcenales? se toma la mitad de la cuota fija para las semanales ? las catorcenales se guían con la quincenal? 5. Considero que sería bueno agregar los mockups de cómo se visualizará este nueva feature en el sistema para tener en mente lo que se debe de validar de front 1.- si en efecto ya hice la corrección y es con 0 en cuota fija,  2.- si es a total nivel nómina de hecho viene desglosado quincenal y mensual. 3.- si justo en la primer quincena no calculara nada, en las imágenes ejemplo viene un texto que dice que el calculo se determinará a final de mes. 4.- Se considerarán las últimas de acuerdo a la fecha y todo se calculará a cierre de ese periodo. 5.- Si justo ya lo envie a UI para los mockups, gracias =) 
RUNA-571, NOM - Agregar un campo de fecha de modificación al descuento INFONAVIT. I. INTRODUCCIÓN. En cuanto a descuento INFONAVIT, los dos movimientos que se exportan con normalidad al SUA son: inicio de crédito y suspensión del mismo. Sin embargo, durante el período que dura la relación laboral pueden darse modificación a los descuentos ya sea por tipo de descuento, en el valor del descuento o con situaciones en que cambia incluso el número de crédito. Aquí se describen dichos cambios y como afectar la base de Runa. II. IMPLEMENTACIÓN EN RUNA 1. Se crearán dos campos en la deducción de INFONAVIT que se llamará "Fecha de modificación de descuento" y "motivo de la modificación". 2.  La fecha de modificación hace referencia a la fecha en que aplicará el cambio de INFONAVIT. 3. El  campo "motivo de la modificación", deberá contener la siguiente lista de campos,  elegir uno por el usuario (tres modificaciones y una suspensión de descuento): a)  Modificación en el tipo de descuento. b) Modificación en el valor de descuento. c) Modificación en el número de crédito. d) Suspensión del crédito (esto debido a que actualmente se puede inactivar la deducción sin considerar la fecha de aplicación). 3. Cada cambio en empleado/pago/crédito Infonavit,  se deberá reflejar en Kardex con los valores siguientes: a) Fecha IMSS de cambio - Fecha IMSS en Kardex,  b) Valor de descuento,  c) No de crédito,  d) Tipo de descuento; y e) Tipo de cambio registrado (incio crédito, reinicio de crédito (para reingresos), modificación al valor, tipo o al número de crédito, suspensión de crédito) - Tipo de movimiento en Kardex. La fecha IMSS del punto e) anterior, será tomada de: La fecha de inicio de descuento será la que el usuario anote en Deducciones - INFONAVIT - Fecha de inicio de descuento y esa fecha debe ser la misma que Fecha IMSS. La fecha de movimiento INFONAVIT, será la del campo Fecha de modificación. Por el momento, no existe un campo de reinicio. Pero se aplicará  la misma de inicio de descuento, siempre y cuando haya acumulados históricos del empleado por este concepto. El reinicio de descuento debe aplicar cuando: a) haya algún empleado de reingreso (este feature deberá estar activo hasta que se aplique la card https://runahr.atlassian.net/browse/PRODUCT-13). En este caso la fecha de inicio INFONAVIT será la misma del reingreso del empleado y deberá cambiarse el campo de inicio de descuento de forma interna y automática. Para esto, una vez que cambie el "estatus del trabajador" de baja a activo (reingreso), el sistema deberá leer si existe algún dato de descuento INFONAVIT y aplicarlo de forma interna. También hay otra forma de reinicio de descuento cuando: b) El empleado está activo, ha tenido descuento INFONAVIT; pero se ha aplicado alguna fecha fin de descuento previa y por alguna razón se inicia nuevamente. Si la deducción pasa de inactiva a "deducción activa", la validación antes de guardar es que será obligatorio anotar la nueva fecha de inicio de descuento, con esto el sistema detectará que es un reinicio de descuento. La leyenda que se muestre, deberá ser: "para reactivar el descuento INFONAVIT es necesario que anotes la fecha de reinicio de descuento". El reinicio debe tener las mismas características que los puntos de la tabla III punto 1 para generar el movimiento en kardex. Para aplicar alguna modificación al valor de descuento: se anexa archivo sobre como se presentan en RUNA ( https://runahr.atlassian.net/secure/attachment/22987/infonavit%20para%20kardex%20%281%29.doc ), existen tres formas de descuento.  4. En el Kardex debe generarse el movimiento con lo que tenga el campo valor de descuento Infonavit.  El valor que debe registrarse en Kardex es el valor de descuento (ya sea %, Factor de descuento o cuota fija), no el importe económico que se calcula en Runa.  Con cada cambio en alguna constante, debe generarse un movimiento en Kardex. La constante varía en promedio dos veces al año. Si hay modificaciones en la constante en un solo día, debe dejarse sólo la final. 5. Ejemplos: Ejemplo 1: Hoy 10 de Marzo el operador abre el perfil de Juan Pérez y CREA un descuento INFONAVIT, con fecha 28 de Febrero.  Que Fecha de Movimiento y que Fecha IMSS debería registrarse? La fecha de movimiento puede ser 10/03, mientras que la Fecha IMSS debe ser 28/02 Ejemplo 2: Hoy 10 de Marzo el operador abre el perfil de Juan Pérez y MODIFICA el valor de descuento INFONAVIT del 10% al 15%, sin embargo esto debe comenzar a suceder hasta la primer nomina de Abril, por lo que modifica la fecha inicio de descuento a 1ro de Abril. Que Fecha de Movimiento y que Fecha IMSS debería registrarse? Que tipo de movimiento es? La fecha que debe ir en la fecha IMSS debe ser el primer día del bimestre por lo que debería ser en fecha IMSS el 1 de marzo o el 1 mayo, dependiendo de lo que el usuario decida. Si se aplica hasta el 1 de mayo el usuario tendrá que incidir el movimiento hasta el mes de mayo. Esto debido a que las hojas de cambio de factor siempre indican que el cambio aplica a partir del bimestre siguiente al que la empresa lo firma de recibido. Por otra parte, la fecha de movimiento puede ser del 10 de marzo. Este movimiento es cambio en el valor de descuento. Entonces, redondeando el tema en fechas esto podrá ser así: 1. Si el trabajador entrega el 10 de marzo, su hoja con alguna modificación a su factor o al tipo de descuento, el cambio debe aplicar a partir del 1 de mayo. En este caso el usuario deberá ingresar la modificación en mayo. 2. Si la modificación se da por entero de la emisión bimestral (EBA), el usuario podrá elegir entre anotar la fecha 1 de marzo o 1 de enero con el fin de pagar el SUA correctamente. Esto se debe dejar a consideración del usuario debido a que si aplica 1 de marzo, se genera automáticamente un requerimiento de parte del INFONAVIT a la empresa que hay que aclarar, mientras que la segunda opción genera un adeudo entre empresa-trabajador, el cual es más fácil de solucionar. El 80% de las empresas, prefiere siempre la segunda opción. III. FUNCIONAMIENTO EN RUNA 1. En cuanto haya una modificación a los siguientes puntos de un descuento INFONAVIT, el campo de "Fecha de modificación de descuento" y "motivo de la modificación", deberá requisitarse Si hay cambios en los campos opcionales, no se generará un movimiento en kardex 2. Una vez guardada la información se generará un movimiento en Kardex. 3. Si por error de usuario hay varios movimientos en el día, sólo se conservará el último, pero se debe seguir la regla de que la fecha IMSS debe ser del primer día del bimestre del actual o del anterior dado que el SUA no lo acepta de otra manera. En este caso, cada movimiento deberá compararse con el inmediato anterior a la fecha en que se intenta el cambio, es decir, por ejemplo: 1. Fecha de inicio de crédito: 01/02/2019. FD de 30.2550. 2. Fecha de cambio por valor de descuento: 01/03/2019. FD de 30.2560.  3. Se hace un cambio de tipo de descuento y factor para el 01/05/2019 a CF 6500.32. Posterior el usuario se da cuenta que en lugar de una CF de 6500.32 era de 6490.50 y sólo cambia ese dato, se pensaría que sólo es un cambio en el valor de descuento; pero el sistema no validará vs el movimiento previo creado ese mismo día sino el de 01/03/2019, entonces: el sistema deberá enviar un aviso de: "Ups, falta un valor en tipo de descuento"*. IV. POLÍTICAS DE FUNCIONAMIENTO 1. Para que se active esta Card, el empleado debe tener descuento por crédito INFONAVIT. 2. El usuario debe decidir aplicar alguno de los incisos mencionados en el punto 3 del tema II. 3. La fecha de modificación sólo debe aceptarse si:  a) la fecha de modificación es del primer día del bimestre actual, o b) la fecha de modificación es del primer día del bimestre anterior. decidir por una u otra fecha, es responsabilidad del usuario, dado que lo que normalmente detona estos cambios es la revisión de cédulas bimestrales y se puede decidir pagarlo a partir del primer día del bimestre o a partir del bimestre anterior para incluir el pago del nuevo factor en el SUA. c) la fecha de aplicación IMSS para la suspensión de descuentos será la del último día inmediato anterior al inicio de la opción que se elija. Por ejemplo:  el día 14 de marzo de 2019, se captura una suspensión de crédito, la fecha imss se determinará así: Bimestre anterior: 31/12/2018. Bimestre actual: 28/02/2018. Para suspender el crédito, se requiere que el usuario edite la deducción y cambie el valor Estado, de Activo a Inactivo. Se tendrán que  requisitar los campos de la tabla del punto I  al momento de quitar el check "deducción activa". 4. Los tipos de  inicio, reinicio, modificación o suspensión, coincidirá con los siguientes números de movimiento para archivo txt SUA: a) Inicio de descuento = "15". b) Suspensión de crédito= "16" c) Reinicio de descuento = "17"  d) Modificación en el tipo de descuento = "18". e) Modificación en el valor de descuento = "19". f) Modificación en el número de crédito = "20" Nota: estos son valores de identificación para la card en la que se generarán archivos txt para SUA. En esta card no se define la distribución y creación del archivo. 5. Datos que deben guardarse en el kardex, independiente de los datos a exportar en SUA: a) Fecha de modificación. b) Motivo de la modificación. c) Valor de descuento. d) Tipo de descuento. e) Número de crédito.
RUNA-40, Dashboard de Outsourcer (Zenka) Los Outsourcers necesitan un Inicio o Dashboard diferente. La v1 contiene solamente esos dos tabs en el sidebar (como se muestra en la imagen). El outsourcer deberá poder: Ver la información de sus clientes Ser notificado vía email de las solicitudes de sus clientes Poder revisar dentro de Runa las solicitudes hechas por sus clientes Tener habilitado el chat de soporte de Runa Update Se hacen los siguientes updates a la card actual con el fin de esclarecer la definición El dashboard outsourcer permitirá ver el listado de sus cuentas activas o pendientes en Runa y poder acceder a ellas, al darle click al botón de Administrar Los outsourcers son como superadmins, cuentan con todos los accesos dentro de la cuenta de la empresa. Existirán 2 tipos de solicitudes por ahora (de nómina y de empleados). De nómina: Problemas con la última nómina, Bonos, Descuentos y Otros. Empleados: Dar de alta y Dar de baja. Todas las solicitudes de nómina al no ser necesariamente automáticas y requerir de una acción definida por el usuario, deberán moverse de estado de forma manual para ir indicando al cliente outsourcer el estado de su solicitud. Las solicitudes de tipo empleado al darle click al botón procesar deberán abrir en otra pestaña la cuenta normal de la empresa en Runa, ubicandola exactamente en el paso 1 del proceso de alta/baja con toda la información antes guardada por el cliente y con los campos disponibles de edición para que el outsourcer haga una revisión rápida de la información. (El procedimiento debe ser igual a como funciona Runa hoy, es decir, el proceso de baja debe incluir el cálculo de finiquito, etc.) Una vez sea dado de alta/baja el empleado asociado a esa solicitud, la solicitud debe cambiar de estado inmediatamente a Procesado. El buscador de la parte superior funciona de la siguiente manera: Al filtrar por nombre de empresa deberá llevarte en una pestaña diferente a la cuenta de esa empresa en Runa (el mismo funcionamiento del botón administrar). Al filtrar por nombre de empleado deberá listarte los empleados y entre parentesis la empresa a la que pertenecen (pues podría existir el mismo empleado en diferentes empresas) y al darle click te abre una nueva pestaña con el perfil del empleado en esa empresa. Las fechas límites deben tener una validación para que no se pueda crear una fecha límite menor al día de hoy. El admin de la cuenta recibirá 2 tipos de emails. Cuando haya una nueva solicitud y cuando llegue el día de la fecha límite establecida por su cliente (este solo se dará si la solicitud aún no se encuentra procesada o si la fecha límite es diferente a la fecha de creación de la solicitud) La sección de Clientes de outsourcer "En proceso" no estará considerada para esta versión 1, por no existir un onboarding automático. La solicitud de baja de un empleado cambiará a "Completada" hasta el momento en que el empleado de la solicitud alcance el estatus de Baja. Si existen 2 empresas clientes con el mismo nombre y con empleados iguales (asimilados y sueldos en empresas distintas) en la búsqueda del empleado no podrán diferenciarse empleados con el mismo nombre. Si un outsourcer tiene varios operadores, se podrán crear n cuentas/accesos al dashboard de outsourcers (se crearán las que solicite el cliente). Todos los correos de aviso o recordatorio, por ahora, les llegará por igual a todas las cuentas que hayan sido creadas. Existen Outsourcers que no quieren que sus empresas tengan control de la nomina o realicen cambios y es por esto que requieren un dashboard especial para ellos que busque lacomunicacion entre el outsourcer y el cliente. Para el cliente tambien habra un dasbboard o sesion especial en la que solamente podra revisar el historico de la nomina. Que se puedan revisar las solicitudes realizadas por los clientes de los outsourcers. - Que la barra superior permita buscar por empresa o por el nombre del empleado y que dirija a esa empresa. - El link de solicitudes dentro de una cards con el resumen de la empresa, lleve a la board de solicitudes de esa empresa. - La board de solicitudes dirigirá al link relacionado a la solicitud para que pueda ser resuelta. - Poder filtrar dentro de la board de solicitudes, por tipo o naturaleza de la solicitud y por fecha. Tambien por empresa con un select que permita escribir el nombre de la empresa para filtrar El dashboard de outsourcer es una cuenta adicional, desde donde podrá ingresar a la administración de todas las cuentas que outsoursorea en una pestaña aparte (incluyendo la suya propia). Para atender las solicitudes deberá de abrirse la cuenta que solicita el cambio en una pestaña aparte como se menciona en los updates de esta card.